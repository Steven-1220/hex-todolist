import{a as k}from"./axios-CCb-kr4I.js";import{r as m,c as y,a as s,b as l,w as g,d,o as U,n as u,e as B,u as R}from"./index-DhNpUYOZ.js";import{S as p}from"./sweetalert2.esm.all-BGf-Fe8G.js";const F={id:"signUpPage",class:"bg-yellow"},T={class:"container signUpPage vhContainer"},q=["disabled"],E="https://todolist-api.hexschool.io",M={__name:"RegisterView",setup(S){const w=R(),e=m({email:"",password:"",passwordConfirm:"",nickname:""}),f=m(""),C=m(""),b=async()=>{if(e.value.password!==e.value.passwordConfirm){p.fire({title:"兩次密碼輸入不相同",text:"請重新輸入密碼",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#d71c1c"}),e.value.password="",e.value.passwordConfirm="";return}try{const a=await k.post(`${E}/users/sign_up`,e.value);console.log(a),C.value=a.data.uid,v(),p.fire({title:"註冊成功",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#ffd370"}),setTimeout(()=>{w.push("/")},1e3)}catch(a){f.value=a.response.data.message,p.fire({title:`${f.value}`,text:"請使用其他的 email",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#d71c1c"}),v()}},c=m(null),v=()=>{c.value.resetForm()};return(a,o)=>{const r=d("VField"),i=d("ErrorMessage"),V=d("RouterLink"),x=d("VForm");return U(),y("div",F,[s("div",T,[o[11]||(o[11]=s("div",{class:"side"},[s("a",{href:"#"},[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),s("div",null,[l(x,{class:"formControls",ref_key:"formRef",ref:c,onSubmit:o[4]||(o[4]=n=>b())},{default:g(({errors:n,meta:_})=>[o[6]||(o[6]=s("h2",{class:"formControls_txt"},"註冊帳號",-1)),o[7]||(o[7]=s("label",{class:"formControls_label",for:"email"},"Email",-1)),l(r,{class:u(["formControls_input form-control",{"is-invalid":n.email}]),type:"email",id:"email",name:"email",placeholder:"請輸入 email",rules:"required|email",modelValue:e.value.email,"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.email=t)},null,8,["class","modelValue"]),l(i,{name:"email",class:"invalid-feedback"}),o[8]||(o[8]=s("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),l(r,{class:u(["formControls_input form-control",{"is-invalid":n.暱稱}]),type:"text",name:"暱稱",id:"name",placeholder:"請輸入您的暱稱",rules:"required",modelValue:e.value.nickname,"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.nickname=t)},null,8,["class","modelValue"]),l(i,{name:"暱稱"}),o[9]||(o[9]=s("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),l(r,{class:u(["formControls_input form-control",{"is-invalid":n.密碼}]),type:"password",name:"密碼",id:"pwd",placeholder:"請輸入密碼",rules:"required|min:6",modelValue:e.value.password,"onUpdate:modelValue":o[2]||(o[2]=t=>e.value.password=t)},null,8,["class","modelValue"]),l(i,{name:"密碼"}),o[10]||(o[10]=s("label",{class:"formControls_label",for:"pwd-confirm"},"再次輸入密碼",-1)),l(r,{class:u(["formControls_input form-control",{"is-invalid":n.再次輸入密碼}]),type:"password",name:"再次輸入密碼",id:"pwd-confirm",placeholder:"請再次輸入密碼",rules:"required|min:6",modelValue:e.value.passwordConfirm,"onUpdate:modelValue":o[3]||(o[3]=t=>e.value.passwordConfirm=t)},null,8,["class","modelValue"]),l(i,{name:"再次輸入密碼"}),s("button",{class:"formControls_btnSubmit",type:"submit",disabled:!_.valid},"註冊帳號",8,q),l(V,{class:"formControls_btnLink",to:"/"},{default:g(()=>o[5]||(o[5]=[B("登入")])),_:1})]),_:1},512)])])])}}};export{M as default};
