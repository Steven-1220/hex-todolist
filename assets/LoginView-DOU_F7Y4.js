import{a as k}from"./axios-CCb-kr4I.js";import{r as i,c as C,a as e,b as s,w as c,d as a,o as x,n as f,e as y,u as h}from"./index-DhNpUYOZ.js";const F={id:"loginPage",class:"bg-yellow"},L={class:"container loginPage vhContainer"},R=["disabled"],T="https://todolist-api.hexschool.io",N={__name:"LoginView",setup(E){const m=i(""),g=h(),t=i({email:"",password:""}),b=async()=>{try{const l=await k.post(`${T}/users/sign_in`,t.value);m.value=l.data.token,document.cookie=`customTodoListToken=${m.value}`,v(),setTimeout(()=>{g.push("/todo")},500)}catch(l){alert(l.response.data.message)}},d=i(null),v=()=>{d.value.resetForm()};return(l,o)=>{const u=a("VField"),p=a("ErrorMessage"),_=a("RouterLink"),w=a("VForm");return x(),C("div",F,[e("div",L,[o[7]||(o[7]=e("div",{class:"side"},[e("a",{href:"#"},[e("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),e("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),e("div",null,[s(w,{class:"formControls",ref_key:"formRef",ref:d,onSubmit:o[2]||(o[2]=n=>b())},{default:c(({errors:n,meta:V})=>[o[4]||(o[4]=e("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1)),o[5]||(o[5]=e("label",{class:"formControls_label",for:"email"},"Email",-1)),s(u,{class:f(["formControls_input form-control",{"is-invalid":n.email}]),type:"email",id:"email",name:"email",placeholder:"請輸入 email",rules:"required|email",modelValue:t.value.email,"onUpdate:modelValue":o[0]||(o[0]=r=>t.value.email=r)},null,8,["class","modelValue"]),s(p,{name:"email",class:"invalid-feedback"}),o[6]||(o[6]=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),s(u,{class:f(["formControls_input form-control",{"is-invalid":n.密碼}]),type:"password",name:"密碼",id:"pwd",placeholder:"請輸入密碼",rules:"required|min:6",modelValue:t.value.password,"onUpdate:modelValue":o[1]||(o[1]=r=>t.value.password=r)},null,8,["class","modelValue"]),s(p,{name:"密碼"}),e("button",{type:"submit",class:"formControls_btnSubmit",disabled:!V.valid},"登入",8,R),s(_,{class:"formControls_btnLink",to:"/register"},{default:c(()=>o[3]||(o[3]=[y("註冊帳號")])),_:1})]),_:1},512)])])])}}};export{N as default};
